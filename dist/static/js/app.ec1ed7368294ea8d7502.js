webpackJsonp([19],{"+r/d":function(t,e){},"2hfY":function(t,e,n){"use strict";e.a=function(t){var e=new Date(t),n=(Date.now()-e)/1e3;if(n<30)return"刚刚";if(n<3600)return Math.ceil(n/60)+"分钟前";if(n<86400)return Math.ceil(n/3600)+"小时前";if(n<172800)return"1天前";return t}},"33ZO":function(t,e,n){"use strict";n("M9A7");var o={name:"BaseHeader",beforeMount:function(){},props:{activeIndex:String,simple:{type:Boolean,default:!1}},data:function(){return{input:""}},computed:{user:function(){return{login:this.$store.state.id>=0&&0!=this.$store.state.id,avatarUrl:this.$store.state.avatarUrl}}},created:function(){"false"==this.$store.state.avatarUrl&&this.logout()},methods:{toregister:function(){this.$router.push("/register")},tologin:function(){this.$router.push("/login")},search:function(){var t=[],e=this.input;console.log(t),this.$router.push({name:"searchpage",params:{searchtags:t,searchcontent:e}})},logout:function(){var t=this,e=this;this.$store.dispatch("logout").then(function(){e.$message.success("已退出"),t.$router.push("/")}).catch(function(t){"error"!==t&&e.$message({message:t,type:"error",showClose:!0})})},touser:function(){var t={name:this.$store.state.name,email:this.$store.state.email,contact:this.$store.state.contact,id:this.$store.state.id,graduate:this.$store.state.graduate,avatarUrl:this.$store.state.avatarUrl};this.$router.push({name:"userboard",params:{userInfo:t}})}}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-header",{staticClass:"me-area"},[n("el-row",{staticClass:"me-header",staticStyle:{display:"flex","flex-wrap":"wrap","justify-content":"left"}},[n("el-col",{staticClass:"me-header-left",attrs:{span:2}},[n("router-link",{staticClass:"home",attrs:{to:"/"}},[n("i",{staticClass:"el-icon-news",staticStyle:{color:"#ffffff"}})])],1),t._v(" "),t.simple?[t._t("default")]:n("el-col",{attrs:{span:6}},[n("el-menu",{attrs:{router:!0,"menu-trigger":"click","default-active":t.activeIndex,mode:"horizontal","background-color":"#DEB887","text-color":"#696969","active-text-color":"#ffffff"}})],1),t._v(" "),n("el-col",{attrs:{span:13}},[n("el-input",{staticStyle:{width:"50%","margin-top":"1%","font-size":"18px"},attrs:{placeholder:"请输入查询内容",clearable:""},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}},[n("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},on:{click:t.search},slot:"prefix"})])],1),t._v(" "),n("el-col",{attrs:{span:3}},[n("el-menu",{attrs:{router:!0,"menu-trigger":"click",mode:"horizontal","active-text-color":"#DEB887","background-color":"#DEB887","text-color":"#F8F8F8"}},[t.user.login?n("div",[n("el-menu-item",[n("el-button",{staticStyle:{"font-size":"20px"},attrs:{type:"text"},on:{click:t.touser}},[t._v("个人中心")]),t._v(" "),n("el-button",{staticStyle:{"font-size":"20px"},attrs:{type:"text"},on:{click:t.logout}},[t._v("退出")])],1)],1):n("div",{staticStyle:{display:"flex","flex-wrap":"wrap","justify-content":"left"}},[n("el-menu-item",[n("el-button",{staticStyle:{"font-size":"20px"},attrs:{type:"text"},on:{click:t.toregister}},[t._v("注册")]),t._v(" "),n("el-button",{staticStyle:{"font-size":"20px"},attrs:{type:"text"},on:{click:t.tologin}},[t._v("登录")])],1)],1)])],1)],2)],1)},staticRenderFns:[]};var r=n("VU/8")(o,a,!1,function(t){n("f6yu")},null,null);e.a=r.exports},"7xIN":function(t,e){},IcnI:function(t,e,n){"use strict";var o=n("//Fk"),a=n.n(o),r=n("NYxO"),c=n("7+uW"),i=n("Moy7"),u=n("M9A7"),s=n("mvHQ"),l=n.n(s),f=n("pFYg"),d=n.n(f),m=function(t,e){return"object"==(void 0===e?"undefined":d()(e))&&(e=l()(e)),window.sessionStorage.setItem(t,e)},p=function(t){var e=window.sessionStorage.getItem(t);if(e){var n=e;return(0===e.indexOf("{")||0===e.indexOf("["))&&e.indexOf(":")>=0&&(n=JSON.parse(e)),n}return!1};c.default.use(r.a);e.a=new r.a.Store({state:{id:p("id"),name:p("name"),avatarUrl:p("avatarUrl"),contact:p("contact"),email:p("email"),graduate:p("graduate"),token:Object(i.a)()},mutations:{SET_TOKEN:function(t,e){t.token=e},SET_id:function(t,e){t.id=e,m("id",e)},SET_name:function(t,e){t.name=e,m("name",e)},SET_avatarUrl:function(t,e){t.avatarUrl=e,m("avatarUrl",e)},SET_contact:function(t,e){t.contact=e,m("contact",e)},SET_email:function(t,e){t.email=e,m("email",e)},SET_graduate:function(t,e){t.graduate=e,m("graduate",e)}},actions:{login:function(t,e){var n=t.commit;t.state;return new a.a(function(t,o){Object(u.c)(e.contact,e.password).then(function(o){n("SET_id",o.content),n("SET_contact",e.contact),t()}).catch(function(t){o(t)})})},getUserInfo:function(t){var e=t.commit,n=t.state;Object(u.b)(n.id).then(function(t){t.content&&(e("SET_id",t.content.id),e("SET_name",t.content.name),e("SET_avatarUrl",t.content.avatarUrl),e("SET_email",t.content.email),e("SET_graduate",t.content.graduate),e("SET_contact",t.content.contact))}).catch(function(t){reject(t)})},updateUserInfo:function(t,e){var n=t.commit;t.state;n("SET_name",e.name),n("SET_avatarUrl",e.avatarUrl),n("SET_email",e.email),n("SET_graduate",e.graduate),n("SET_contact",e.contact)},logout:function(t){var e=t.commit;t.state;e("SET_id","-1"),m("id",-1),e("SET_name",""),m("name",""),e("SET_avatarUrl",""),m("avatarUrl",""),e("SET_email",""),m("email",""),e("SET_graduate",""),m("graduate",""),e("SET_contact",""),m("contact","")},fedLogOut:function(t){var e=t.commit;e("SET_id","-1"),m("id",-1),e("SET_name",""),m("name",""),e("SET_avatarUrl",""),m("avatarUrl",""),e("SET_email",""),m("email",""),e("SET_graduate",""),m("graduate",""),e("SET_contact",""),m("contact",""),resolve()},register:function(t,e){t.commit,t.state;return new a.a(function(t,n){Object(u.d)(e.contact,e.email,e.name,e.password).then(function(e){t()}).catch(function(t){console.log("catch error"),n(t)})})}}})},M9A7:function(t,e,n){"use strict";e.c=function(t,e){var n={contact:t,password:e};return Object(o.a)({url:"/login",method:"post",params:n})},e.b=function(t){return Object(o.a)({url:"/blogger/"+t,method:"get"})},e.d=function(t,e,n,a){var r={name:n,password:a,contact:t,email:e};return console.log(r),Object(o.a)({url:"/register",method:"post",params:r})},e.e=function(t,e){return console.log(e),Object(o.a)({url:"/blogger/"+t,method:"patch",data:e})},e.a=function(t){return console.log(t),Object(o.a)({url:"/blogger/"+t,method:"get"})};var o=n("OOvn")},Moy7:function(t,e,n){"use strict";e.a=function(){return localStorage.token}},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("fCJj");var o=n("qBF2"),a=n.n(o),r=n("7+uW"),c={name:"GoTop",data:function(){return{topShow:!1}},methods:{toTop:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0,this.topShow=!1},needToTop:function(){var t=document.documentElement.scrollTop||document.body.scrollTop;this.topShow=t>400}},mounted:function(){this.$nextTick(function(){window.addEventListener("scroll",this.needToTop)})}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",[e("div",{directives:[{name:"show",rawName:"v-show",value:this.topShow,expression:"topShow"}],staticClass:"me-to-top",on:{click:this.toTop}},[e("i",{staticClass:"el-icon-caret-top"})])])},staticRenderFns:[]};var u={name:"App",components:{GoTop:n("VU/8")(c,i,!1,function(t){n("gaZc")},null,null).exports}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view"),this._v(" "),e("go-top")],1)},staticRenderFns:[]};var l=n("VU/8")(u,s,!1,function(t){n("pzRZ")},null,null).exports,f=n("2X9z"),d=n.n(f),m=n("/ocq"),p={name:"Home",data:function(){return{activeIndex:"/"}},components:{"base-header":n("33ZO").a}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"home"}},[e("el-container",[e("base-header",{attrs:{activeIndex:this.activeIndex}}),this._v(" "),e("router-view",{staticClass:"me-container"})],1)],1)},staticRenderFns:[]};var g=n("VU/8")(p,h,!1,function(t){n("+r/d")},null,null).exports,v=n("IcnI"),b=n("Moy7");r.default.use(m.a);var _=new m.a({routes:[{path:"/write/:id?",component:function(t){return Promise.all([n.e(0),n.e(4)]).then(function(){return t(n("tgdm"))}.bind(null,n)).catch(n.oe)},meta:{requireLogin:!0}},{path:"",name:"Home",component:g,children:[{path:"/",component:function(t){return Promise.all([n.e(0),n.e(7)]).then(function(){return t(n("mlqX"))}.bind(null,n)).catch(n.oe)}},{path:"/log",component:function(t){return n.e(12).then(function(){return t(n("joCn"))}.bind(null,n)).catch(n.oe)}},{path:"/alltags",component:function(t){return Promise.all([n.e(0),n.e(17)]).then(function(){return t(n("iTtZ"))}.bind(null,n)).catch(n.oe)}},{path:"/searchpage",name:"searchpage",component:function(t){return Promise.all([n.e(0),n.e(10)]).then(function(){return t(n("gdBO"))}.bind(null,n)).catch(n.oe)}},{path:"/archives/:year?/:month?",component:function(t){return Promise.all([n.e(0),n.e(16)]).then(function(){return t(n("3/TF"))}.bind(null,n)).catch(n.oe)}},{path:"/messageBoard",component:function(t){return n.e(14).then(function(){return t(n("ncpC"))}.bind(null,n)).catch(n.oe)}},{path:"/userboard",name:"userboard",component:function(t){return Promise.all([n.e(0),n.e(6)]).then(function(){return t(n("7wFW"))}.bind(null,n)).catch(n.oe)}},{path:"/userinfos",component:function(t){return Promise.all([n.e(0),n.e(5)]).then(function(){return t(n("b+6v"))}.bind(null,n)).catch(n.oe)}},{path:"/user",name:"user",component:function(t){return Promise.all([n.e(0),n.e(13)]).then(function(){return t(n("nXOw"))}.bind(null,n)).catch(n.oe)}},{path:"/postboard",name:"postboard",component:function(t){return Promise.all([n.e(0),n.e(3)]).then(function(){return t(n("w19Z"))}.bind(null,n)).catch(n.oe)}},{path:"/readblog",name:"readblog",component:function(t){return Promise.all([n.e(0),n.e(2)]).then(function(){return t(n("hGBi"))}.bind(null,n)).catch(n.oe)}},{path:"/view/:id",component:function(t){return Promise.all([n.e(0),n.e(1)]).then(function(){return t(n("u66k"))}.bind(null,n)).catch(n.oe)}},{path:"/:type/all",component:function(t){return Promise.all([n.e(0),n.e(8)]).then(function(){return t(n("4fko"))}.bind(null,n)).catch(n.oe)}},{path:"/:type/:id",component:function(t){return Promise.all([n.e(0),n.e(9)]).then(function(){return t(n("8wPo"))}.bind(null,n)).catch(n.oe)}}]},{path:"/login",component:function(t){return n.e(11).then(function(){return t(n("lmfZ"))}.bind(null,n)).catch(n.oe)}},{path:"/register",component:function(t){return n.e(15).then(function(){return t(n("tcoL"))}.bind(null,n)).catch(n.oe)}}],scrollBehavior:function(t,e,n){return{x:0,y:0}}});_.beforeEach(function(t,e,n){Object(b.a)()?"/login"===t.path?n({path:"/"}):0===v.a.state.account.length?v.a.dispatch("getUserInfo").then(function(t){n()}).catch(function(){n({path:"/"})}):n():t.matched.some(function(t){return t.meta.requireLogin})?d()({type:"warning",showClose:!0,message:"请先登录哦"}):n()});var S=_,T=n("M4fF"),w=n.n(T),E=(n("7xIN"),n("2hfY")),x=n("mtWM"),y=n.n(x);function k(t){var e,n=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=document.cookie.match(n))?e[2]:null}y.a.defaults.withCredentials=!0,r.default.prototype.$axios=y.a,r.default.prototype.$cookieStore={setCookie:function(t,e,n){var o=new Date;o.setDate(o.getDate()+n),console.log(t+"="+escape(e)+(null==n?"":";expires="+o.toGMTString())),document.cookie=t+"="+escape(e)+(null==n?"":";expires="+o.toGMTString()),console.log(document.cookie)},getCookie:k,delCookie:function(t){var e=new Date;e.setTime(e.getTime()-1);var n=k(t);null!=n&&(document.cookie=t+"="+n+";expires="+e.toGMTString())}},r.default.config.productionTip=!1,r.default.use(a.a),Object.defineProperty(r.default.prototype,"$_",{value:w.a}),r.default.directive("title",function(t,e){document.title=t.dataset.title}),r.default.filter("format",E.a),new r.default({el:"#app",router:S,store:v.a,template:"<App/>",components:{App:l}})},OOvn:function(t,e,n){"use strict";var o=n("//Fk"),a=n.n(o),r=n("2X9z"),c=n.n(r),i=n("mtWM"),u=n.n(i),s=(n("IcnI"),n("Moy7"),u.a.create({withCredentials:!0,baseURL:Object({NODE_ENV:"production"}).BASE_API,timeout:1e4}));s.interceptors.response.use(function(t){return t.data},function(t){return c()({type:"warning",showClose:!0,message:"连接超时"}),a.a.reject("error")}),e.a=s},f6yu:function(t,e){},fCJj:function(t,e){},gaZc:function(t,e){},pzRZ:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.ec1ed7368294ea8d7502.js.map