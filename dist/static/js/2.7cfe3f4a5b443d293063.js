webpackJsonp([2],{"+iI6":function(t,e){},SldL:function(t,e){!function(e){"use strict";var n,r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag",l="object"==typeof t,u=e.regeneratorRuntime;if(u)l&&(t.exports=u);else{(u=e.regeneratorRuntime=l?t.exports:{}).wrap=_;var m="suspendedStart",h="suspendedYield",p="executing",f="completed",d={},v={};v[a]=function(){return this};var g=Object.getPrototypeOf,y=g&&g(g(F([])));y&&y!==r&&o.call(y,a)&&(v=y);var w=O.prototype=x.prototype=Object.create(v);C.prototype=w.constructor=O,O.constructor=C,O[s]=C.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===C||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,O):(t.__proto__=O,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(w),t},u.awrap=function(t){return{__await:t}},k(j.prototype),j.prototype[c]=function(){return this},u.AsyncIterator=j,u.async=function(t,e,n,r){var o=new j(_(t,e,n,r));return u.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},k(w),w[s]="Generator",w[a]=function(){return this},w.toString=function(){return"[object Generator]"},u.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},u.values=F,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach($),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,o){return c.type="throw",c.arg=t,e.next=r,o&&(e.method="next",e.arg=n),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),$(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;$(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:F(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),d}}}function _(t,e,n,r){var o=e&&e.prototype instanceof x?e:x,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(t,e,n){var r=m;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===f){if("throw"===o)throw i;return R()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=L(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===m)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var s=b(t,e,n);if("normal"===s.type){if(r=n.done?f:h,s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=f,n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function b(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function x(){}function C(){}function O(){}function k(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function j(t){var e;this._invoke=function(n,r){function i(){return new Promise(function(e,i){!function e(n,r,i,a){var c=b(t[n],t,r);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==typeof l&&o.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,i,a)},function(t){e("throw",t,i,a)}):Promise.resolve(l).then(function(t){s.value=t,i(s)},a)}a(c.arg)}(n,r,e,i)})}return e=e?e.then(i,i):i()}}function L(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,L(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=b(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function $(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function F(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return i.next=i}}return{next:R}}function R(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},Xxa5:function(t,e,n){t.exports=n("jyFz")},ZYmg:function(t,e,n){"use strict";e.d=function(t,e){return Object(c.a)({url:"/blog/"+t+"/post/"+e,method:"get"})},e.c=function(t){return Object(c.a)({url:""+t,method:"get"})},n.d(e,"f",function(){return m}),n.d(e,"a",function(){return h}),e.g=function(t,e,n,r){return console.log("\n        bid    = "+t+"\n        pid    = "+e+"\n        comment = "+n+"\n        reply = "+r+"\n    "),console.log(n),Object(c.a)({url:"/blog/"+t+"/post/"+e+"/comment",method:"post",data:n,params:{reply:0}})},e.e=function(t,e,n,r,o){return Object(c.a)({url:"/blog/"+t+"/post/"+e+"/comment",method:"get",params:{all:n,page:r,perpage:o}})},e.b=function(t,e,n){return Object(c.a)({url:"/blog/"+t+"/post/"+e,method:"patch",data:n})},e.h=function(t,e){return console.log(e),Object(c.a)({url:"/blogger/"+t+"/attachment",method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}})};var r=n("Xxa5"),o=n.n(r),i=n("exGp"),a=n.n(i),c=n("OOvn"),s=n("M4fF");n.n(s);var l,u,m=(l=a()(o.a.mark(function t(e,n){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(n),t.abrupt("return",Object(c.a)({url:"/blog/"+e+"/post",method:"post",data:n}));case 2:case"end":return t.stop()}},t,this)})),function(t,e){return l.apply(this,arguments)}),h=(u=a()(o.a.mark(function t(e,n,r){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("\n        bid    = "+e+"\n        pid    = "+n+"\n        detail = "+r+"\n    "),t.abrupt("return",Object(c.a)({url:"/blog/"+e+"/post/"+n+"/detail",method:"patch",data:r,headers:{"Content-Type":"text/plain; charset=utf-8"}}));case 2:case"end":return t.stop()}},t,this)})),function(t,e,n){return u.apply(this,arguments)})},exGp:function(t,e,n){"use strict";e.__esModule=!0;var r,o=n("//Fk"),i=(r=o)&&r.__esModule?r:{default:r};e.default=function(t){return function(){var e=t.apply(this,arguments);return new i.default(function(t,n){return function r(o,a){try{var c=e[o](a),s=c.value}catch(t){return void n(t)}if(!c.done)return i.default.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}("next")})}}},hGBi:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("xVlr"),o=n("ZYmg"),i=(n("xCct"),{name:"ReadBlog",created:function(){this.getBlog()},data:function(){return{article:{id:"",title:"测试",viewCounts:0,commentCounts:0,author:{id:"",avatar:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png",nickname:"软工学生"},editor:{value:"# 一级标题\n## 二级标题",toolbarsFlag:!1,subfield:!1,defaultOpen:"preview"}},commentinfo:{id:-1,author:{id:-1,name:"",avatarURL:"",contact:"",email:"",graduate:""},content:"",post:"",replyed:"",replyTo:{},reviewPassed:!0},commentinfos:[]}},computed:{title:function(){return this.article.title+" - 文章 - For Fun"},avatar:function(){return"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"}},methods:{getBlog:function(){var t=this,e=this;e.commentinfo.author=this.$store.state,e.commentinfo.post="/blog/"+e.$route.params.userid+"/post/"+this.$route.params.blogid,Object(o.d)(e.$route.params.userid,e.$route.params.blogid).then(function(t){e.article.author.id=t.content.blogger.id,e.article.id=t.content.id,e.article.title=t.content.title,console.log("detail",t.content.detail),Object(o.c)(t.content.detail).then(function(t){console.log(t),e.article.editor.value=t.content}),e.article.author.avatar="http://10.129.167.54:8079"+t.content.blogger.avatarUrl,e.article.author.nickname=t.content.blogger.name,e.article.viewCounts=t.content.visits}).catch(function(t){"error"!==t&&e.$message({type:"error",message:"文章加载失败",showClose:!0})}),Object(o.e)(e.$route.params.userid,e.$route.params.blogid,!0,0,1e3).then(function(n){console.log(e.$route.params.userid,e.$route.params.blogid),console.log("getcommentdetail"),console.log(n),e.commentinfos=n.content,e.article.commentCounts=e.commentinfos.length,console.log(t.commentinfos)})},editblog:function(){console.log(this.$route.params.userid,this.$route.params.blogid),this.$router.push({name:"postboard",params:{userid:this.$route.params.userid,blogid:this.$route.params.blogid}})},postcomment:function(){var t=this;console.log(this.commentinfo),Object(o.g)(this.$route.params.userid,this.$route.params.blogid,this.commentinfo,-1).then(function(e){t.getBlog(),t.commentinfo.content=""})}},components:{"markdown-editor":r.a}}),a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"title",rawName:"v-title"}],staticClass:"my-view-body",attrs:{"data-title":t.title}},[n("el-container",{staticClass:"my-view-container"},[n("el-main",[n("div",{staticClass:"my-view-card"},[n("h1",{staticClass:"my-view-title"},[t._v("\n                    "+t._s(t.article.title)+"\n                ")]),t._v(" "),n("div",{staticClass:"my-view-author"},[n("a",[n("img",{staticClass:"my-view-picture",attrs:{src:t.article.author.avatar}})]),t._v(" "),n("div",{staticClass:"my-view-info"},[n("span",[t._v(t._s(t.article.author.nickname))]),t._v(" "),n("span",[t._v("阅读 "+t._s(t.article.viewCounts))]),t._v(" "),n("span",[t._v("评论 "+t._s(t.article.commentCounts))])]),t._v(" "),this.article.author.id==this.$store.state.id?n("el-button",{on:{click:function(e){return t.editblog()}}},[t._v("\n                        编辑\n                    ")]):t._e()],1),t._v(" "),n("div",{staticClass:"my-view-content"},[n("markdown-editor",{staticStyle:{"min-height":"700px"},attrs:{editor:t.article.editor}})],1),t._v(" "),n("div",{staticClass:"my-view-end"},[n("el-alart",{attrs:{title:"文章结束...",type:"success",center:"",closable:!1}})],1),t._v(" "),n("div",{staticClass:"my-view-comment"},[n("div",{staticClass:"my-view-comment-write"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:2}},[n("a",[n("img",{staticClass:"my-view-picture",attrs:{src:t.avatar}})])]),t._v(" "),n("el-col",{attrs:{span:22}},[n("el-input",{staticClass:"my-view-comment-text",attrs:{type:"textarea",autosize:{minRows:2},placeholder:"你的评论...",resize:"none"},model:{value:t.commentinfo.content,callback:function(e){t.$set(t.commentinfo,"content",e)},expression:"commentinfo.content"}})],1)],1),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:2,offset:22}},[n("el-button",{attrs:{type:"text"},on:{click:function(e){return t.postcomment()}}},[t._v("评论")])],1)],1)],1),t._v(" "),n("div",{staticClass:"my-view-comment-title"},[n("span",[t._v(t._s(t.article.commentCounts)+" 条评论")])]),t._v(" "),t._l(t.commentinfos,function(e,r){return n("el-card",{key:r,attrs:{index:r}},[t._v("\n                        "+t._s(e.content)+"\n                    ")])})],2)])])],1)],1)},staticRenderFns:[]};var c=n("VU/8")(i,a,!1,function(t){n("t1/n")},null,null);e.default=c.exports},jyFz:function(t,e,n){var r=function(){return this}()||Function("return this")(),o=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,i=o&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n("SldL"),o)r.regeneratorRuntime=i;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},kFim:function(t,e,n){"use strict";e.a=function(t){return Object(r.a)({url:"/comments/article/"+t,method:"get"})},e.b=function(t){return Object(r.a)({url:"/comments/create/change",method:"post",data:t})};var r=n("OOvn")},"t1/n":function(t,e){},xCct:function(t,e,n){"use strict";var r=n("kFim"),o={name:"CommentItem",props:{articleId:Number,comment:Object,index:Number,rootCommentCounts:Number},data:function(){return{placeholder:"你的评论...",commentShow:!1,commentShowIndex:"",reply:this.getEmptyReply()}},methods:{showComment:function(t,e){this.reply=this.getEmptyReply(),this.commentShowIndex!==t?(e?(this.placeholder="@"+e.nickname+" ",this.reply.toUser=e):this.placeholder="你的评论...",this.commentShow=!0,this.commentShowIndex=t):(this.commentShow=!1,this.commentShowIndex="")},publishComment:function(){var t=this;t.reply.content&&Object(r.b)(t.reply).then(function(e){t.$message({type:"success",message:"评论成功",showClose:!0}),t.comment.childrens||(t.comment.childrens=[]),t.comment.childrens.unshift(e.data),t.$emit("commentCountsIncrement"),t.showComment(t.commentShowIndex)}).catch(function(e){"error"!==e&&t.$message({type:"error",message:"评论失败",showClose:!0})})},getEmptyReply:function(){return{article:{id:this.articleId},parent:{id:this.comment.id},toUser:"",content:""}}}},i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"me-view-comment-item"},[n("div",{staticClass:"me-view-comment-author"},[n("a",{},[n("img",{staticClass:"me-view-picture",attrs:{src:t.comment.author.avatar}})]),t._v(" "),n("div",{staticClass:"me-view-info"},[n("span",{staticClass:"me-view-nickname"},[t._v(t._s(t.comment.author.nickname))]),t._v(" "),n("div",{staticClass:"me-view-meta"},[n("span",[t._v(t._s(t.rootCommentCounts-t.index)+"楼")]),t._v(" "),n("span",[t._v(t._s(t._f("format")(t.comment.createDate)))])])])]),t._v(" "),n("div",[n("p",{staticClass:"me-view-comment-content"},[t._v(t._s(t.comment.content))]),t._v(" "),n("div",{staticClass:"me-view-comment-tools"},[n("a",{staticClass:"me-view-comment-tool",on:{click:function(e){return t.showComment(-1)}}},[n("i",{staticClass:"me-icon-comment"}),t._v("  评论\n      ")])]),t._v(" "),n("div",{staticClass:"me-reply-list"},[t._l(t.comment.childrens,function(e){return n("div",{key:e.id,staticClass:"me-reply-item"},[n("div",{staticStyle:{"font-size":"14px"}},[n("span",{staticClass:"me-reply-user"},[t._v(t._s(e.author.nickname)+":  ")]),t._v(" "),2==e.level?n("span",{staticClass:"me-reply-user"},[t._v("@"+t._s(e.toUser.nickname)+" ")]):t._e(),t._v(" "),n("span",[t._v(t._s(e.content))])]),t._v(" "),n("div",{staticClass:"me-view-meta"},[n("span",{staticStyle:{"padding-right":"10px"}},[t._v(t._s(t._f("format")(e.createDate)))]),t._v(" "),n("a",{staticClass:"me-view-comment-tool",on:{click:function(n){return t.showComment(e.id,e.author)}}},[n("i",{staticClass:"me-icon-comment"}),t._v(" 回复\n          ")])])])}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.commentShow,expression:"commentShow"}],staticClass:"me-view-comment-write"},[n("el-input",{staticClass:"me-view-comment-text",staticStyle:{width:"90%"},attrs:{type:"input",placeholder:t.placeholder,resize:"none"},model:{value:t.reply.content,callback:function(e){t.$set(t.reply,"content",e)},expression:"reply.content"}}),t._v(" "),n("el-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"text"},on:{click:function(e){return t.publishComment()}}},[t._v("评论")])],1)],2)])])},staticRenderFns:[]};var a=n("VU/8")(o,i,!1,function(t){n("+iI6")},null,null);e.a=a.exports}});
//# sourceMappingURL=2.7cfe3f4a5b443d293063.js.map