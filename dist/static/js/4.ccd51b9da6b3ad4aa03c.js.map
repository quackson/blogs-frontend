{"version":3,"sources":["webpack:///./node_modules/core-js/library/modules/es6.object.assign.js","webpack:///./node_modules/core-js/library/modules/_object-assign.js","webpack:///./node_modules/core-js/library/fn/object/assign.js","webpack:///src/views/blog/BlogWrite.vue","webpack:///./src/views/blog/BlogWrite.vue?3667","webpack:///./src/views/blog/BlogWrite.vue","webpack:///./node_modules/babel-runtime/core-js/object/assign.js"],"names":["$export","__webpack_require__","S","F","assign","DESCRIPTORS","getKeys","gOPS","pIE","toObject","IObject","$assign","Object","module","exports","A","B","Symbol","K","split","forEach","k","keys","join","target","source","T","aLen","arguments","length","index","getSymbols","f","isEnum","key","concat","j","call","BlogWrite","name","mounted","this","$route","params","id","getArticleById","getCategorysAndTags","editorToolBarToFixedWrapper","$_","throttle","editorToolBarToFixed","window","addEventListener","beforeDestroy","removeEventListener","data","publishVisible","categorys","tags","articleForm","title","summary","category","editor","value","ref","default_open","toolbars","bold","italic","header","underline","strikethrough","mark","superscript","subscript","quote","ol","ul","imagelink","code","fullscreen","readmodel","help","undo","redo","trash","navigation","preview","rules","required","message","trigger","max","type","computed","methods","_this","that","api_article","then","assign_default","body","content","map","item","catch","error","$message","showClose","publishShow","d_render","publish","_this2","$refs","validate","valid","article","contentHtml","loading","$loading","lock","text","close","$router","push","path","articleId","cancel","_this3","$confirm","confirmButtonText","cancelButtonText","tag","toolbar","document","querySelector","documentElement","scrollTop","getElementById","style","display","classList","add","remove","components","base-header","BaseHeader","markdown-editor","MarkdownEditor","beforeRouteEnter","to","from","next","backgroundColor","beforeRouteLeave","blog_BlogWrite","render","_vm","_h","$createElement","_c","_self","directives","rawName","attrs","data-title","simple","span","offset","staticClass","_v","round","on","click","resize","autosize","placeholder","model","callback","$$v","$set","expression","staticStyle","visibility","height","visible","close-on-click-modal","custom-class","update:visible","$event","prop","rows","label","value-key","_l","c","categoryname","t","_s","tagname","slot","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","default","__esModule"],"mappings":"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","file":"static/js/4.ccd51b9da6b3ad4aa03c.js","sourcesContent":["// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.assign.js\n// module id = R4wc\n// module chunks = 1 4","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar DESCRIPTORS = require('./_descriptors');\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || isEnum.call(S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-assign.js\n// module id = To3L\n// module chunks = 1 4","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/assign.js\n// module id = V3tA\n// module chunks = 1 4","<template>\n  <div id=\"write\" v-title :data-title=\"title\">\n    <el-container>\n      <base-header :simple=true>\n        <el-col :span=\"4\" :offset=\"2\">\n          <div class=\"me-write-info\">写文章</div>\n        </el-col>\n        <el-col :span=\"4\" :offset=\"6\">\n          <div class=\"me-write-btn\">\n            <el-button round @click=\"publishShow\">发布</el-button>\n            <el-button round @click=\"cancel\">取消</el-button>\n          </div>\n        </el-col>\n      </base-header>\n\n      <el-container class=\"me-area me-write-box\">\n        <el-main class=\"me-write-main\">\n          <div class=\"me-write-title\">\n            <el-input resize=\"none\"\n                      type=\"textarea\"\n                      autosize\n                      v-model=\"articleForm.title\"\n                      placeholder=\"请输入标题\"\n                      class=\"me-write-input\">\n            </el-input>\n\n          </div>\n          <div id=\"placeholder\" style=\"visibility: hidden;height: 89px;display: none;\"></div>\n          <markdown-editor :editor=\"articleForm.editor\" class=\"me-write-editor\"></markdown-editor>\n        </el-main>\n      </el-container>\n\n      <el-dialog title=\"摘要 分类 标签\"\n                 :visible.sync=\"publishVisible\"\n                 :close-on-click-modal=false\n                 custom-class=\"me-dialog\">\n\n        <el-form :model=\"articleForm\" ref=\"articleForm\" :rules=\"rules\">\n          <el-form-item prop=\"summary\">\n            <el-input type=\"textarea\"\n                      v-model=\"articleForm.summary\"\n                      :rows=\"6\"\n                      placeholder=\"请输入摘要\">\n            </el-input>\n          </el-form-item>\n          <el-form-item label=\"文章分类\" prop=\"category\">\n            <el-select v-model=\"articleForm.category\" value-key=\"id\" placeholder=\"请选择文章分类\">\n              <el-option v-for=\"c in categorys\" :key=\"c.id\" :label=\"c.categoryname\" :value=\"c\"></el-option>\n            </el-select>\n          </el-form-item>\n\n          <el-form-item label=\"文章标签\" prop=\"tags\">\n            <el-checkbox-group v-model=\"articleForm.tags\">\n              <el-checkbox v-for=\"t in tags\" :key=\"t.id\" :label=\"t.id\" name=\"tags\">{{t.tagname}}</el-checkbox>\n            </el-checkbox-group>\n          </el-form-item>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"publishVisible = false\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"publish('articleForm')\">发布</el-button>\n        </div>\n      </el-dialog>\n    </el-container>\n  </div>\n</template>\n\n<script>\n  import BaseHeader from '@/views/BaseHeader'\n  import MarkdownEditor from '@/components/markdown/MarkdownEditor'\n  import {publishArticle, getArticleById} from '@/api/article'\n  import {getAllCategorys} from '@/api/category'\n  import {getAllTags} from '@/api/tag'\n\n  export default {\n    name: 'BlogWrite',\n    mounted() {\n\n      if(this.$route.params.id){\n        this.getArticleById(this.$route.params.id)\n      }\n\n      this.getCategorysAndTags()\n      this.editorToolBarToFixedWrapper = this.$_.throttle(this.editorToolBarToFixed, 200)\n\n      window.addEventListener('scroll', this.editorToolBarToFixedWrapper, false);\n    },\n    beforeDestroy() {\n      window.removeEventListener('scroll', this.editorToolBarToFixedWrapper, false)\n    },\n    data() {\n      return {\n        publishVisible: false,\n        categorys: [],\n        tags: [],\n        articleForm: {\n          id: '',\n          title: '',\n          summary: '',\n          category: '',\n          tags: [],\n          editor: {\n            value: '',\n            ref: '',//保存mavonEditor实例  实际不该这样\n            default_open: 'edit',\n            toolbars: {\n              bold: true, // 粗体\n              italic: true, // 斜体\n              header: true, // 标题\n              underline: true, // 下划线\n              strikethrough: true, // 中划线\n              mark: true, // 标记\n              superscript: true, // 上角标\n              subscript: true, // 下角标\n              quote: true, // 引用\n              ol: true, // 有序列表\n              ul: true, // 无序列表\n              imagelink: true, // 图片链接\n              code: true, // code\n              fullscreen: true, // 全屏编辑\n              readmodel: true, // 沉浸式阅读\n              help: true, // 帮助\n              undo: true, // 上一步\n              redo: true, // 下一步\n              trash: true, // 清空\n              navigation: true, // 导航目录\n              //subfield: true, // 单双栏模式\n              preview: true, // 预览\n            }\n          }\n        },\n        rules: {\n          summary: [\n            {required: true, message: '请输入摘要', trigger: 'blur'},\n            {max: 80, message: '不能大于80个字符', trigger: 'blur'}\n          ],\n          category: [\n            {required: true, message: '请选择文章分类', trigger: 'change'}\n          ],\n          tags: [\n            {type: 'array', required: true, message: '请选择标签', trigger: 'change'}\n          ]\n        }\n      }\n    },\n    computed: {\n      title (){\n        return '写文章 - For Fun'\n      }\n    },\n    methods: {\n      getArticleById(id) {\n        let that = this\n        getArticleById(id).then(data => {\n\n          Object.assign(that.articleForm, data.data)\n          that.articleForm.editor.value = data.data.body.content\n\n          let tags = this.articleForm.tags.map(function (item) {\n            return item.id;\n          })\n\n          this.articleForm.tags = tags\n\n\n        }).catch(error => {\n          if (error !== 'error') {\n            that.$message({type: 'error', message: '文章加载失败', showClose: true})\n          }\n        })\n      },\n      publishShow() {\n        if (!this.articleForm.title) {\n          this.$message({message: '标题不能为空哦', type: 'warning', showClose: true})\n          return\n        }\n\n        if (this.articleForm.title.length > 30) {\n          this.$message({message: '标题不能大于30个字符', type: 'warning', showClose: true})\n          return\n        }\n\n        if (!this.articleForm.editor.ref.d_render) {\n          this.$message({message: '内容不能为空哦', type: 'warning', showClose: true})\n          return\n        }\n\n        this.publishVisible = true;\n      },\n      publish(articleForm) {\n\n        let that = this\n\n        this.$refs[articleForm].validate((valid) => {\n          if (valid) {\n\n            let tags = this.articleForm.tags.map(function (item) {\n              return {id: item};\n            });\n\n            let article = {\n              id: this.articleForm.id,\n              title: this.articleForm.title,\n              summary: this.articleForm.summary,\n              category: this.articleForm.category,\n              tags: tags,\n              body: {\n                content: this.articleForm.editor.value,\n                contentHtml: this.articleForm.editor.ref.d_render\n              }\n\n            }\n\n            this.publishVisible = false;\n\n            let loading = this.$loading({\n              lock: true,\n              text: '发布中，请稍后...'\n            })\n\n            publishArticle(article).then((data) => {\n              loading.close();\n              that.$message({message: '发布成功啦', type: 'success', showClose: true})\n              that.$router.push({path: `/view/${data.data.articleId}`})\n\n            }).catch((error) => {\n              loading.close();\n              if (error !== 'error') {\n                that.$message({message: error, type: 'error', showClose: true});\n              }\n            })\n\n          } else {\n            return false;\n          }\n        });\n      },\n      cancel() {\n        this.$confirm('文章将不会保存, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          this.$router.push('/')\n        })\n      },\n      getCategorysAndTags() {\n        let that = this\n        getAllCategorys().then(data => {\n          that.categorys = data.data\n        }).catch(error => {\n          if (error !== 'error') {\n            that.$message({type: 'error', message: '文章分类加载失败', showClose: true})\n          }\n        })\n\n        getAllTags().then(data => {\n          that.tags = data.data\n        }).catch(error => {\n          if (error !== 'error') {\n            that.$message({type: 'error', message: '标签加载失败', showClose: true})\n          }\n        })\n\n      },\n      editorToolBarToFixed() {\n\n        let toolbar = document.querySelector('.v-note-op');\n        let curHeight = document.documentElement.scrollTop || document.body.scrollTop;\n        if (curHeight >= 160) {\n          document.getElementById(\"placeholder\").style.display = \"block\"; //bad  用计算属性较好\n          toolbar.classList.add(\"me-write-toolbar-fixed\");\n        } else {\n          document.getElementById(\"placeholder\").style.display = \"none\";\n          toolbar.classList.remove(\"me-write-toolbar-fixed\");\n        }\n      }\n    },\n    components: {\n      'base-header': BaseHeader,\n      'markdown-editor': MarkdownEditor\n    },\n    //组件内的守卫 调整body的背景色\n    beforeRouteEnter(to, from, next) {\n      window.document.body.style.backgroundColor = '#fff';\n      next();\n    },\n    beforeRouteLeave(to, from, next) {\n      window.document.body.style.backgroundColor = '#f5f5f5';\n      next();\n    }\n  }\n</script>\n\n<style>\n  .el-header {\n    position: fixed;\n    z-index: 1024;\n    min-width: 100%;\n    box-shadow: 0 2px 3px hsla(0, 0%, 7%, .1), 0 0 0 1px hsla(0, 0%, 7%, .1);\n  }\n\n  .me-write-info {\n    line-height: 60px;\n    font-size: 18px;\n    font-weight: 600;\n  }\n\n  .me-write-btn {\n    margin-top: 10px;\n  }\n\n  .me-write-box {\n    max-width: 700px;\n    margin: 80px auto 0;\n  }\n\n  .me-write-main {\n    padding: 0;\n  }\n\n  .me-write-title {\n  }\n\n  .me-write-input textarea {\n    font-size: 32px;\n    font-weight: 600;\n    height: 20px;\n    border: none;\n  }\n\n  .me-write-editor {\n    min-height: 650px !important;\n  }\n\n  .me-header-left {\n    margin-top: 10px;\n  }\n\n  .me-title img {\n    max-height: 2.4rem;\n    max-width: 100%;\n  }\n\n  .me-write-toolbar-fixed {\n    position: fixed;\n    width: 700px !important;\n    top: 60px;\n  }\n\n  .v-note-op {\n    box-shadow: none !important;\n  }\n\n  .auto-textarea-input, .auto-textarea-block {\n    font-size: 18px !important;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/blog/BlogWrite.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"title\",rawName:\"v-title\"}],attrs:{\"id\":\"write\",\"data-title\":_vm.title}},[_c('el-container',[_c('base-header',{attrs:{\"simple\":true}},[_c('el-col',{attrs:{\"span\":4,\"offset\":2}},[_c('div',{staticClass:\"me-write-info\"},[_vm._v(\"写文章\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":4,\"offset\":6}},[_c('div',{staticClass:\"me-write-btn\"},[_c('el-button',{attrs:{\"round\":\"\"},on:{\"click\":_vm.publishShow}},[_vm._v(\"发布\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"round\":\"\"},on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])],1)])],1),_vm._v(\" \"),_c('el-container',{staticClass:\"me-area me-write-box\"},[_c('el-main',{staticClass:\"me-write-main\"},[_c('div',{staticClass:\"me-write-title\"},[_c('el-input',{staticClass:\"me-write-input\",attrs:{\"resize\":\"none\",\"type\":\"textarea\",\"autosize\":\"\",\"placeholder\":\"请输入标题\"},model:{value:(_vm.articleForm.title),callback:function ($$v) {_vm.$set(_vm.articleForm, \"title\", $$v)},expression:\"articleForm.title\"}})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"visibility\":\"hidden\",\"height\":\"89px\",\"display\":\"none\"},attrs:{\"id\":\"placeholder\"}}),_vm._v(\" \"),_c('markdown-editor',{staticClass:\"me-write-editor\",attrs:{\"editor\":_vm.articleForm.editor}})],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"摘要 分类 标签\",\"visible\":_vm.publishVisible,\"close-on-click-modal\":false,\"custom-class\":\"me-dialog\"},on:{\"update:visible\":function($event){_vm.publishVisible=$event}}},[_c('el-form',{ref:\"articleForm\",attrs:{\"model\":_vm.articleForm,\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"prop\":\"summary\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":6,\"placeholder\":\"请输入摘要\"},model:{value:(_vm.articleForm.summary),callback:function ($$v) {_vm.$set(_vm.articleForm, \"summary\", $$v)},expression:\"articleForm.summary\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"文章分类\",\"prop\":\"category\"}},[_c('el-select',{attrs:{\"value-key\":\"id\",\"placeholder\":\"请选择文章分类\"},model:{value:(_vm.articleForm.category),callback:function ($$v) {_vm.$set(_vm.articleForm, \"category\", $$v)},expression:\"articleForm.category\"}},_vm._l((_vm.categorys),function(c){return _c('el-option',{key:c.id,attrs:{\"label\":c.categoryname,\"value\":c}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"文章标签\",\"prop\":\"tags\"}},[_c('el-checkbox-group',{model:{value:(_vm.articleForm.tags),callback:function ($$v) {_vm.$set(_vm.articleForm, \"tags\", $$v)},expression:\"articleForm.tags\"}},_vm._l((_vm.tags),function(t){return _c('el-checkbox',{key:t.id,attrs:{\"label\":t.id,\"name\":\"tags\"}},[_vm._v(_vm._s(t.tagname))])}),1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.publishVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.publish('articleForm')}}},[_vm._v(\"发布\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-8ff32870\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/blog/BlogWrite.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8ff32870\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./BlogWrite.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./BlogWrite.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./BlogWrite.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8ff32870\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./BlogWrite.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/blog/BlogWrite.vue\n// module id = null\n// module chunks = ","module.exports = { \"default\": require(\"core-js/library/fn/object/assign\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/assign.js\n// module id = woOf\n// module chunks = 1 4"],"sourceRoot":""}